name: E2E cli init

on:
  release:
    types: [published]
    
jobs:
  cli-test:
    runs-on: aws-linux-small

    steps:
      - name: Install Foundry
        uses: foundry-rs/foundry-toolchain@v1
        with:
          version: nightly-5ac78a9cd4b94dc53d1fe5e0f42372b28b5a7559 # 2024-06-02

      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Run init test
        env:
          HOME: "${{ runner.temp }}"
          GIT_COMMITTER_NAME: "Bob the Bot"
          GIT_COMMITTER_EMAIL: "bot@vlayer.xyz"
          GIT_AUTHOR_NAME: "Bob the Bot"
          GIT_AUTHOR_EMAIL: "bot@vlayer.xyz"
        run: ./bash/vlayer-init-test.sh
