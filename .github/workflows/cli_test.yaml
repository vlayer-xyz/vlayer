name: E2E cli init

on:
  release:
    types: [published]
    
jobs:
  cli-test:
    runs-on: aws-linux-small

    steps:
      - name: Install Foundry
        uses: foundry-rs/foundry-toolchain@v1
        with:
          version: nightly-d75318c9c7a1c6af5404fe96f63ca890dcdd588d # 2024-09-05
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Run init test
        env:
          HOME: "${{ runner.temp }}"
          GIT_COMMITTER_NAME: "Bob the Bot"
          GIT_COMMITTER_EMAIL: "bot@vlayer.xyz"
          GIT_AUTHOR_NAME: "Bob the Bot"
          GIT_AUTHOR_EMAIL: "bot@vlayer.xyz"
        run: ./bash/vlayer-init-test.sh
