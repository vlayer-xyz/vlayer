name: CLI Init End-to-End Test

on:
  release:
    types: [created]

jobs:
  cli-test:
    runs-on: ubuntu-latest

    steps:
      - name: Install Foundry
        uses: foundry-rs/foundry-toolchain@v1
        with:
          version: nightly-5ac78a9cd4b94dc53d1fe5e0f42372b28b5a7559 # 2024-06-02

      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Install vlayer and run init test
        run: |
          curl -SL  https://install.vlayer.xyz | bash
          source ~/.config/.bashrc
          vlayerup
          ./bash/vlayer-init-test.sh