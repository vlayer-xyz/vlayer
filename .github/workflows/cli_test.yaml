name: E2E cli init

on:
  release:
    types: [published]
    
jobs:
  cli-test:
    runs-on: aws-linux-small

    steps:
      - name: Install Foundry
        uses: foundry-rs/foundry-toolchain@v1
        with:
          version: nightly-626221f5ef44b4af950a08e09bd714650d9eb77d # 2024-08-02

      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Run init test
        env:
          HOME: "${{ runner.temp }}"
          GIT_COMMITTER_NAME: "Bob the Bot"
          GIT_COMMITTER_EMAIL: "bot@vlayer.xyz"
          GIT_AUTHOR_NAME: "Bob the Bot"
          GIT_AUTHOR_EMAIL: "bot@vlayer.xyz"
        run: ./bash/vlayer-init-test.sh
