---
- name: Install Foundryup
  ansible.builtin.shell: |
    set -ueo pipefail
    curl -L https://foundry.paradigm.xyz | bash
  args:
    creates: ~/.foundry/bin/foundryup
    executable: /bin/bash

- name: Install Foundry
  ansible.builtin.shell: ~/.foundry/bin/foundryup
  args:
    executable: /bin/bash
    creates: ~/.foundry/bin/forge

- name: Install rustup
  ansible.builtin.shell: |
    set -ueo pipefail
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- --default-toolchain stable -y
  args:
    executable: /bin/bash
    creates: .cargo/bin/rustup

- name: Install risc0
  ansible.builtin.shell: |
    set -ueo pipefail
    curl -L https://risczero.com/install | bash
    export PATH=$PATH:"$HOME/.risc0/bin"
    rzup install r0vm ${{ vlayer_risc0_version }}
  args:
    executable: /bin/bash
    creates: ~/.cargo/bin/r0vm
