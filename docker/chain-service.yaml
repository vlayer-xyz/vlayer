include:
  - anvil.yaml
services:
  vlayer-chain-worker-L1:
    depends_on:
      - anvil-L1
    image: ghcr.io/vlayer-xyz/chain_worker:latest
    container_name: vlayer-chain-worker-L1
    pull_policy: always
    volumes:
      - ./chain_db:/chain_db
    pid: "host"
    environment:
      RUST_LOG: "info"
      DB_PATH: /chain_db
      RPC_URL: http://anvil-L1:8545
      CHAIN_ID: 31337
      PROOF_MODE: fake
      RISC0_DEV_MODE: 1
      MAX_BACK_PROPAGATION_BLOCKS: 10
      MAX_HEAD_BLOCKS: 10
      CONFIRMATIONS: 1
  vlayer-chain-worker-L2-OP:
    depends_on:
      - anvil-L2-OP
    image: ghcr.io/vlayer-xyz/chain_worker:latest
    container_name: vlayer-chain-worker-L2-OP
    pull_policy: always
    volumes:
      - ./chain_db:/chain_db
    pid: "host"
    environment:
      RUST_LOG: "info"
      DB_PATH: /chain_db
      RPC_URL: http://anvil-L2-OP:8545
      CHAIN_ID: 31338
      PROOF_MODE: fake
      RISC0_DEV_MODE: 1
      MAX_BACK_PROPAGATION_BLOCKS: 10
      MAX_HEAD_BLOCKS: 10
      CONFIRMATIONS: 1
  vlayer-chain-server:
    image: ghcr.io/vlayer-xyz/chain_server:latest
    container_name: vlayer-chain-server
    pull_policy: always
    ports:
      - "127.0.0.1:3001:3001"
    volumes:
      - ./chain_db:/chain_db
    pid: "host"
    environment:
      RUST_LOG: "info"
      DB_PATH: /chain_db